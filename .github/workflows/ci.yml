name: CI

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        ami:
          - name: testami1
            profile: testprofile1
          - name: testami2
            profile: testprofile2
    steps:
    # - uses: actions/checkout@v1
    - name: test
      run: echo "Running ${AWS_NAME} with ${AWS_PROFILE}"
      env:
        AWS_NAME: ${{ matrix.ami.name }}
        AWS_PROFILE: ${{ matrix.ami.profile }}
      if: matrix.ami.name != 'testami1'
    - name: Checkout tools repo
      uses: actions/checkout@v2
      with:
        repository: vghn/ansible
        path: ~/ansible
    # - name: Set up Python
    #   uses: actions/setup-python@v1
    # - name: Install dependencies
    #   run: |
    #     python3 -m pip install --upgrade pip ansible hvac pycrypto aws-amicleaner future
    # - run: ansible --version
    # - run: amicleaner --version
    # - name: Run a one-line script
    #   run: echo Hello, world!
    # - name: Run a multi-line script
    #   run: |
    #     echo Add other actions to build,
    #     echo test, and deploy your project.
